<ion-content [fullscreen]="true" class="page-bg product-content">
  <div class="page-shell product-shell">
    <div class="page-topbar">
      <button type="button" class="back-btn" (click)="goBack()" aria-label="Volver">
        <ion-icon name="arrow-back"></ion-icon>
      </button>
      <h1 class="topbar-title">Gestion de fincas</h1>
    </div>

    <section class="results-card">
      <h2 class="section-title">Mis fincas</h2>
      <ion-progress-bar *ngIf="loadingFarms" type="indeterminate"></ion-progress-bar>

      <ng-container *ngIf="!loadingFarms && pagedFarms.length; else emptyState">
        <app-container-card-flex
          [type]="'farm'"
          [items]="pagedFarms"
          [showActions]="true"
          (editFarm)="onEdit($event)"
          (deleteFarm)="onDelete($event)"
          (viewFarm)="onView($event)">
        </app-container-card-flex>
      </ng-container>

      <div class="pager" *ngIf="!loadingFarms && totalPages > 1">
        <app-button
          class="btn-inline"
          color="secondary"
          icon="chevron-back-outline"
          [text]="''"
          type="button"
          [disabled]="isFirstPage"
          (clicked)="onPrevPage()">
        </app-button>
        <div class="pager__label">
          <ion-icon name="swap-horizontal-outline" class="pager__hint-icon"></ion-icon>
          <span>{{ pageIndex + 1 }} / {{ totalPages }}</span>
        </div>
        <app-button
          class="btn-inline"
          color="secondary"
          icon="chevron-forward-outline"
          [text]="''"
          type="button"
          [disabled]="isLastPage"
          (clicked)="onNextPage()">
        </app-button>
      </div>
    </section>
  </div>

  <ng-template #emptyState>
    <div class="empty-state">
      <ion-icon name="home-outline"></ion-icon>
      <p *ngIf="!loadingFarms">Aun no registras fincas.</p>
      <p *ngIf="loadingFarms">Cargando fincas...</p>
      <app-button
        class="btn-inline"
        color="secondary"
        [text]="'Crear finca'"
        type="button"
        (clicked)="onCreate()">
      </app-button>
    </div>
  </ng-template>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button color="success" (click)="onCreate()">
      <ion-icon name="add-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>



