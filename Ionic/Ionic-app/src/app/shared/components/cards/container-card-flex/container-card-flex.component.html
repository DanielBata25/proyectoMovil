<ng-container *ngIf="!loading; else skeletonTpl">
  <div [ngClass]="gridClasses">
    <div class="card-grid__item" *ngFor="let it of items; trackBy: trackById">
      <!-- PRODUCTS -->
      <app-card
        *ngIf="isProduct(it)"
        [product]="it"
        [showActions]="showActions"
        [showFavorite]="showFavorite"
        (edit)="editProduct.emit(it)"
        (view)="viewProduct.emit(it)"
        (delete)="deleteProduct.emit(it)">
      </app-card>

      <!-- FARMS -->
      <app-card-farm
        *ngIf="isFarm(it)"
        [farm]="it"
        [showActions]="showActions"
        (edit)="editFarm.emit(it)"
        (delete)="deleteFarm.emit(it)"
        (view)="viewFarm.emit(it)">
      </app-card-farm>
    </div>
  </div>
</ng-container>

<ng-template #skeletonTpl>
  <div [ngClass]="gridClasses">
    <div class="card-grid__item" *ngFor="let _ of skeletonItems; let i = index">
      <ng-container [ngSwitch]="type">
        <app-card
          *ngSwitchCase="'product'"
          [product]="placeholder"
          [showActions]="false"
          [showFavorite]="false"
          [loading]="true">
        </app-card>
        <ion-card *ngSwitchCase="'farm'" class="farm-skeleton-card">
          <ion-card-content>
            <ion-skeleton-text animated class="farm-skeleton-thumb"></ion-skeleton-text>
            <ion-skeleton-text animated class="farm-skeleton-line"></ion-skeleton-text>
            <ion-skeleton-text animated class="farm-skeleton-line short"></ion-skeleton-text>
            <ion-skeleton-text animated class="farm-skeleton-line tiny"></ion-skeleton-text>
          </ion-card-content>
        </ion-card>
      </ng-container>
    </div>
  </div>
</ng-template>
